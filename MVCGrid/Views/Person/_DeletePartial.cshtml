@model Person

<div class="alert alert-warning" role="alert">
    <h4 class="alert-heading">
        <i class="fas fa-exclamation-triangle"></i> Confirm Delete
    </h4>
    <p>Are you sure you want to delete this person? This action cannot be undone.</p>
</div>

<div class="row mb-3">
    <div class="col-md-3 fw-bold">ID:</div>
    <div class="col-md-9">@Model.Id</div>
</div>

<div class="row mb-3">
    <div class="col-md-3 fw-bold">Full Name:</div>
    <div class="col-md-9">@Model.FullName</div>
</div>

<div class="row mb-3">
    <div class="col-md-3 fw-bold">Email:</div>
    <div class="col-md-9">@Model.Email</div>
</div>

<div class="row mb-3">
    <div class="col-md-3 fw-bold">Phone:</div>
    <div class="col-md-9">@Model.Phone</div>
</div>

<div class="row mb-3">
    <div class="col-md-3 fw-bold">Department:</div>
    <div class="col-md-9">@Model.Department</div>
</div>

<div class="row mb-3">
    <div class="col-md-3 fw-bold">Date of Birth:</div>
    <div class="col-md-9">@Model.DateOfBirth.ToString("MM/dd/yyyy")</div>
</div>

<div class="row mb-3">
    <div class="col-md-3 fw-bold">Status:</div>
    <div class="col-md-9">
        @if (Model.IsActive)
        {
            <span class="badge bg-success">Active</span>
        }
        else
        {
            <span class="badge bg-danger">Inactive</span>
        }
    </div>
</div>

<form id="deleteForm" onsubmit="return submitDeleteForm(@Model.Id)">
    @Html.AntiForgeryToken()
    
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <i class="fas fa-times"></i> Cancel
        </button>
        <button type="submit" class="btn btn-danger">
            <i class="fas fa-trash"></i> Delete Person
        </button>
    </div>
</form>

<script>
    function submitDeleteForm(id) {
        Swal.fire({
            title: 'Are you sure?',
            html: 'You are about to delete this person.<br/>You won\'t be able to revert this!',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Yes, delete it!',
            cancelButtonText: 'Cancel',
            reverseButtons: true,
            focusCancel: true
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: '@Url.Action("DeleteConfirmed")/' + id,
                    type: 'POST',
                    data: $('#deleteForm').serialize(),
                    success: function(result) {
                        if (result.success) {
                            crudModal.hide();
                            Swal.fire({
                                title: 'Deleted!',
                                text: result.message || 'Person has been deleted successfully.',
                                icon: 'success',
                                timer: 2000,
                                showConfirmButton: false
                            });
                            refreshGrid();
                        } else {
                            Swal.fire({
                                title: 'Error!',
                                text: result.message || 'Delete failed! Please try again.',
                                icon: 'error'
                            });
                        }
                    },
                    error: function() {
                        Swal.fire({
                            title: 'Error!',
                            text: 'Delete failed! Please try again.',
                            icon: 'error'
                        });
                    }
                });
            }
        });
        
        return false;
    }
</script>
